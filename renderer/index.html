<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Classificador de Frutas - Projeto</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/themes/dark.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns@3.0.0/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/pt.js"></script>
</head>
<body>
    <div class="container">
        <!-- Top Navigation Bar -->
        <nav class="top-nav">
            <button id="backBtn" class="nav-btn">
                <span class="icon">‚Üê</span> Voltar
            </button>
            <div class="project-title-nav" id="projectTitleNav">
                <h1 id="projectNameDisplay">Carregando...</h1>
            </div>
            <div class="nav-actions">
                <button id="viewEntriesBtn" class="nav-btn active">
                    <span class="icon">üìã</span> Entradas
                </button>
                <button id="viewGraphBtn" class="nav-btn">
                    <span class="icon">üìä</span> Gr√°fico
                </button>
            </div>
        </nav>

        <!-- Main Content -->
        <main id="mainContent">
            <!-- Entries View -->
            <div id="entriesView" class="view-section active">
                <div class="entries-header">
                    <h2>Entradas de Dados</h2>
                    <button id="newEntryBtn" class="btn btn-primary">
                        <span class="icon">‚ûï</span> Nova Entrada
                    </button>
                </div>

                <div class="entries-list" id="entriesList">
                    <!-- Entries will be populated here -->
                </div>

                <div id="noEntries" class="no-data-message" style="display: none;">
                    <p>üì≠ Nenhuma entrada encontrada</p>
                    <p>Clique em "Nova Entrada" para adicionar dados</p>
                </div>
            </div>

            <!-- Graph View -->
            <div id="graphView" class="view-section">
                <div class="graph-header">
                    <h2>An√°lise de Evolu√ß√£o</h2>
                    <div class="date-range-selector">
                        <label>
                            De:
                            <input type="date" id="dateFrom">
                        </label>
                        <label>
                            At√©:
                            <input type="date" id="dateTo">
                        </label>
                        <button id="applyDateFilter" class="btn btn-secondary">Aplicar</button>
                        <button id="resetDateFilter" class="btn btn-secondary">Resetar</button>
                    </div>
                </div>

                <div class="graph-container" id="graphContainer">
                    <canvas id="evolutionChart"></canvas>
                </div>

                <div id="noGraphData" class="no-data-message" style="display: none;">
                    <p>üìä Sem dados suficientes para gerar o gr√°fico</p>
                    <p>Adicione pelo menos 2 entradas para visualizar a evolu√ß√£o</p>
                </div>
            </div>
        </main>
    </div>

    <!-- Entry Modal (for creating/editing entries) -->
    <div id="entryModal" class="modal">
        <div class="modal-content modal-xlarge">
            <div class="modal-header">
                <h2 id="entryModalTitle">Nova Entrada</h2>
                <button class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <form id="entryForm">
                    <!-- Date Selection -->
                    <div class="form-section">
                        <div class="form-group">
                            <label for="entryDate">Data da Medi√ß√£o:</label>
                            <input type="date" id="entryDate" required>
                        </div>
                    </div>

                    <!-- Classification Limits -->
                    <div class="form-section">
                        <h3>Limites de Classifica√ß√£o</h3>
                        <div id="limitsError" class="limits-error" style="display: none;"></div>
                        <div class="limits-compact">
                            <div class="limit-row">
                                <span class="limit-label">Ovo de codorna</span>
                                <div class="limit-inputs-inline">
                                    <input type="number" step="0.001" class="limit-input-compact" id="codornaMin" placeholder="M√≠n (kg)">
                                    <span class="separator">‚Äî</span>
                                    <input type="number" step="0.001" class="limit-input-compact" id="codornaMax" placeholder="M√°x (kg)">
                                </div>
                            </div>
                            <div class="limit-row">
                                <span class="limit-label">Ovo de galinha</span>
                                <div class="limit-inputs-inline">
                                    <input type="number" step="0.001" class="limit-input-compact" id="galinhaMin" placeholder="M√≠n (kg)">
                                    <span class="separator">‚Äî</span>
                                    <input type="number" step="0.001" class="limit-input-compact" id="galinhaMax" placeholder="M√°x (kg)">
                                </div>
                            </div>
                            <div class="limit-row">
                                <span class="limit-label">Laranja</span>
                                <div class="limit-inputs-inline">
                                    <input type="number" step="0.001" class="limit-input-compact" id="laranjaMin" placeholder="M√≠n (kg)">
                                    <span class="separator">‚Äî</span>
                                    <input type="number" step="0.001" class="limit-input-compact" id="laranjaMax" placeholder="M√°x (kg)">
                                </div>
                            </div>
                            <div class="limit-row">
                                <span class="limit-label">Coco verde</span>
                                <div class="limit-inputs-inline">
                                    <input type="number" step="0.001" class="limit-input-compact" id="cocoVerdeMin" placeholder="M√≠n (kg)">
                                    <span class="separator">‚Äî</span>
                                    <input type="number" step="0.001" class="limit-input-compact" id="cocoVerdeMax" placeholder="M√°x (kg)">
                                </div>
                            </div>
                            <div class="limit-row">
                                <span class="limit-label">Coco seco</span>
                                <div class="limit-inputs-inline">
                                    <input type="number" step="0.001" class="limit-input-compact" id="cocoSecoMin" placeholder="M√≠n (kg)">
                                    <span class="separator">‚Äî</span>
                                    <input type="number" step="0.001" class="limit-input-compact" id="cocoSecoMax" placeholder="M√°x (kg)">
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Measurements -->
                    <div class="form-section">
                        <h3>Medi√ß√µes</h3>
                        
                        <div class="measurements-grid">
                            <!-- Testemunhas -->
                            <div class="measurement-group">
                                <h4>Grupo Testemunha</h4>
                                
                                <div class="measurement-box">
                                    <h5>Testemunha 1</h5>
                                    <div class="input-group">
                                        <input type="number" step="0.001" placeholder="Peso (kg)" data-test="testemunha1">
                                        <button type="button" class="add-btn" data-test="testemunha1">+</button>
                                    </div>
                                    <div class="values-list" data-test="testemunha1"></div>
                                    <div class="average-display" data-test="testemunha1">
                                        M√©dia: <strong>-</strong>
                                    </div>
                                </div>

                                <div class="measurement-box">
                                    <h5>Testemunha 2</h5>
                                    <div class="input-group">
                                        <input type="number" step="0.001" placeholder="Peso (kg)" data-test="testemunha2">
                                        <button type="button" class="add-btn" data-test="testemunha2">+</button>
                                    </div>
                                    <div class="values-list" data-test="testemunha2"></div>
                                    <div class="average-display" data-test="testemunha2">
                                        M√©dia: <strong>-</strong>
                                    </div>
                                </div>
                            </div>

                            <!-- Testes -->
                            <div class="measurement-group experimental">
                                <h4>Grupo Experimental</h4>
                                
                                <div class="measurement-box">
                                    <h5>Teste 1</h5>
                                    <div class="input-group">
                                        <input type="number" step="0.001" placeholder="Peso (kg)" data-test="teste1">
                                        <button type="button" class="add-btn" data-test="teste1">+</button>
                                    </div>
                                    <div class="values-list" data-test="teste1"></div>
                                    <div class="average-display" data-test="teste1">
                                        M√©dia: <strong>-</strong>
                                    </div>
                                </div>

                                <div class="measurement-box">
                                    <h5>Teste 2</h5>
                                    <div class="input-group">
                                        <input type="number" step="0.001" placeholder="Peso (kg)" data-test="teste2">
                                        <button type="button" class="add-btn" data-test="teste2">+</button>
                                    </div>
                                    <div class="values-list" data-test="teste2"></div>
                                    <div class="average-display" data-test="teste2">
                                        M√©dia: <strong>-</strong>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Results Preview -->
                    <div class="form-section">
                        <h3>Resultados</h3>
                        
                        <!-- Individual Measurements -->
                        <div class="individual-results-grid">
                            <div class="individual-result-item">
                                <span class="result-label">Testemunha 1:</span>
                                <div class="result-value-container">
                                    <span class="result-value" id="previewTestemunha1">-</span>
                                    <span class="category-badge" id="categoryTestemunha1"></span>
                                </div>
                            </div>
                            
                            <div class="individual-result-item">
                                <span class="result-label">Testemunha 2:</span>
                                <div class="result-value-container">
                                    <span class="result-value" id="previewTestemunha2">-</span>
                                    <span class="category-badge" id="categoryTestemunha2"></span>
                                </div>
                            </div>
                            
                            <div class="individual-result-item">
                                <span class="result-label">Teste 1:</span>
                                <div class="result-value-container">
                                    <span class="result-value" id="previewTeste1">-</span>
                                    <span class="category-badge" id="categoryTeste1"></span>
                                </div>
                            </div>
                            
                            <div class="individual-result-item">
                                <span class="result-label">Teste 2:</span>
                                <div class="result-value-container">
                                    <span class="result-value" id="previewTeste2">-</span>
                                    <span class="category-badge" id="categoryTeste2"></span>
                                </div>
                            </div>
                        </div>

                        <!-- Group Averages -->
                        <div class="results-preview">
                            <div class="result-item">
                                <span class="result-label">M√©dia Testemunhas:</span>
                                <div class="result-value-container">
                                    <span class="result-value" id="previewMediaTestemunhas">-</span>
                                    <span class="category-badge" id="categoryMediaTestemunhas"></span>
                                </div>
                            </div>
                            <div class="result-item">
                                <span class="result-label">M√©dia Testes:</span>
                                <div class="result-value-container">
                                    <span class="result-value" id="previewMediaTestes">-</span>
                                    <span class="category-badge" id="categoryMediaTestes"></span>
                                </div>
                            </div>
                            <div class="result-item">
                                <span class="result-label">Compara√ß√£o:</span>
                                <span class="result-value" id="previewComparacao">-</span>
                            </div>
                        </div>
                    </div>

                    <!-- Form Actions -->
                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">
                            <span class="icon">üíæ</span> Salvar Entrada
                        </button>
                        <button type="button" class="btn btn-secondary cancel-btn">Cancelar</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
